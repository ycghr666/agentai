{"version":3,"file":"wrappers.cjs","names":["IterableReadableStream"],"sources":["../../src/runnables/wrappers.ts"],"sourcesContent":["import { IterableReadableStream } from \"../utils/stream.js\";\n\nexport function convertToHttpEventStream(stream: AsyncGenerator) {\n  const encoder = new TextEncoder();\n  const finalStream = new ReadableStream<Uint8Array>({\n    async start(controller) {\n      for await (const chunk of stream) {\n        controller.enqueue(\n          encoder.encode(`event: data\\ndata: ${JSON.stringify(chunk)}\\n\\n`)\n        );\n      }\n      controller.enqueue(encoder.encode(\"event: end\\n\\n\"));\n      controller.close();\n    },\n  });\n  return IterableReadableStream.fromReadableStream(finalStream);\n}\n"],"mappings":";;;AAEA,SAAgB,yBAAyB,QAAwB;CAC/D,MAAM,UAAU,IAAI,aAAa;CACjC,MAAM,cAAc,IAAI,eAA2B,EACjD,MAAM,MAAM,YAAY;AACtB,aAAW,MAAM,SAAS,OACxB,YAAW,QACT,QAAQ,OAAO,sBAAsB,KAAK,UAAU,MAAM,CAAC,MAAM,CAClE;AAEH,aAAW,QAAQ,QAAQ,OAAO,iBAAiB,CAAC;AACpD,aAAW,OAAO;IAErB,CAAC;AACF,QAAOA,4CAAuB,mBAAmB,YAAY"}