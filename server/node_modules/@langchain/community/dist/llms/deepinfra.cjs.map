{"version":3,"file":"deepinfra.cjs","names":["LLM"],"sources":["../../src/llms/deepinfra.ts"],"sourcesContent":["import { LLM, type BaseLLMParams } from \"@langchain/core/language_models/llms\";\nimport { getEnvironmentVariable } from \"@langchain/core/utils/env\";\n\nexport const DEEPINFRA_API_BASE =\n  \"https://api.deepinfra.com/v1/openai/completions\";\n\nexport const DEFAULT_MODEL_NAME = \"mistralai/Mixtral-8x22B-Instruct-v0.1\";\n\nexport const ENV_VARIABLE = \"DEEPINFRA_API_TOKEN\";\n\nexport interface DeepInfraLLMParams extends BaseLLMParams {\n  apiKey?: string;\n  model?: string;\n  maxTokens?: number;\n  temperature?: number;\n}\n\nexport class DeepInfraLLM extends LLM implements DeepInfraLLMParams {\n  static lc_name() {\n    return \"DeepInfraLLM\";\n  }\n\n  lc_serializable = true;\n\n  apiKey?: string;\n\n  model?: string;\n\n  maxTokens?: number;\n\n  temperature?: number;\n\n  constructor(fields: Partial<DeepInfraLLMParams> = {}) {\n    super(fields);\n\n    this.apiKey = fields.apiKey ?? getEnvironmentVariable(ENV_VARIABLE);\n    this.model = fields.model ?? DEFAULT_MODEL_NAME;\n    this.maxTokens = fields.maxTokens;\n    this.temperature = fields.temperature;\n  }\n\n  _llmType(): string {\n    return \"DeepInfra\";\n  }\n\n  async _call(\n    prompt: string,\n    options: this[\"ParsedCallOptions\"]\n  ): Promise<string> {\n    const body = {\n      temperature: this.temperature,\n      max_tokens: this.maxTokens,\n      ...options,\n      prompt,\n      model: this.model,\n    };\n    const response = await this.caller.call(() =>\n      fetch(DEEPINFRA_API_BASE, {\n        method: \"POST\",\n        headers: {\n          Authorization: `Bearer ${this.apiKey}`,\n          \"Content-Type\": \"application/json\",\n        },\n        body: JSON.stringify(body),\n      }).then((res) => res.json())\n    );\n    return response as string;\n  }\n}\n"],"mappings":";;;;;;;;;;;;AAGA,MAAa,qBACX;AAEF,MAAa,qBAAqB;AAElC,MAAa,eAAe;AAS5B,IAAa,eAAb,cAAkCA,yCAAkC;CAClE,OAAO,UAAU;AACf,SAAO;;CAGT,kBAAkB;CAElB;CAEA;CAEA;CAEA;CAEA,YAAY,SAAsC,EAAE,EAAE;AACpD,QAAM,OAAO;AAEb,OAAK,SAAS,OAAO,gEAAiC,aAAa;AACnE,OAAK,QAAQ,OAAO,SAAS;AAC7B,OAAK,YAAY,OAAO;AACxB,OAAK,cAAc,OAAO;;CAG5B,WAAmB;AACjB,SAAO;;CAGT,MAAM,MACJ,QACA,SACiB;EACjB,MAAM,OAAO;GACX,aAAa,KAAK;GAClB,YAAY,KAAK;GACjB,GAAG;GACH;GACA,OAAO,KAAK;GACb;AAWD,SAViB,MAAM,KAAK,OAAO,WACjC,MAAM,oBAAoB;GACxB,QAAQ;GACR,SAAS;IACP,eAAe,UAAU,KAAK;IAC9B,gBAAgB;IACjB;GACD,MAAM,KAAK,UAAU,KAAK;GAC3B,CAAC,CAAC,MAAM,QAAQ,IAAI,MAAM,CAAC,CAC7B"}